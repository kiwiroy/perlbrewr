<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Integrates Perlbrew With R, Specifically (knitr &amp; rmarkdown) • perlbrewr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Integrates Perlbrew With R, Specifically (knitr &amp; rmarkdown)">
<meta property="og:description" content="The goal of perlbrewr is to assist the loading of a perlbrew 
  perl and optionally a library with the aim of improving reproducibility.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">perlbrewr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/perlbrewr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kiwiroy/perlbrewr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    

<!-- README.md is generated from README.Rmd. Please edit that file -->
<!--   home: !r Sys.getenv("PERLBREW_HOME") -->
<div id="perlbrewr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#perlbrewr" class="anchor"></a>perlbrewr</h1></div>
<p>The goal of perlbrewr is to assist the loading of a <a href="https://perlbrew.pl">perlbrew</a> perl and optionally a library with the aim of improving reproducibility. The central task that perlbrewr performs is management of the environment variables in the same manner as perlbrew itself, by calling perlbrew commands and translating the changes there into R function calls that achieve the same outcome. Primarily, these are <code>Sys.setenv</code> and <code>Sys.unsetenv</code>.</p>
<div id="dependencies" class="section level2">
<h2 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h2>
<div id="r" class="section level3">
<h3 class="hasAnchor">
<a href="#r" class="anchor"></a>R</h3>
<ul>
<li>R (&gt;= 3.3.0)</li>
<li>magrittr</li>
<li>stringr</li>
</ul>
</div>
<div id="non-r" class="section level3">
<h3 class="hasAnchor">
<a href="#non-r" class="anchor"></a>Non R</h3>
<ul>
<li><a href="https://perlbrew.pl">perlbrew</a></li>
</ul>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of perlbrewr from <a href="https://github.com/kiwiroy/perlbrewr">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"kiwiroy/perlbrewr"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a basic example of usage to load a perlbrew environment:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(perlbrewr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">result &lt;-<span class="st"> </span><span class="kw"><a href="reference/perlbrew.html">perlbrew</a></span>(<span class="dt">root =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"PERLBREW_ROOT"</span>), <span class="dt">version =</span> <span class="st">"5.24.0"</span>)</a></code></pre></div>
<p>The brewed version of perl is now the default.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.which">Sys.which</a></span>(<span class="st">"perl"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;                                                perl </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; "/home/travis/perl5/perlbrew/perls/5.24.0/bin/perl"</span></a></code></pre></div>
<p>This is also the case in <code>bash</code> shell blocks.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="fu">which</span> perl</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; /home/travis/perl5/perlbrew/perls/5.24.0/bin/perl</span></a></code></pre></div>
<p>By configuring <code>knitr</code> - this happens automatically by default.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">engine.path =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">perl =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.which">Sys.which</a></span>(<span class="st">"perl"</span>)[[<span class="st">"perl"</span>]]))</a></code></pre></div>
<p>Perl code in <code>perl</code> blocks run the same interpreter.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode perl"><code class="sourceCode perl"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="fu">print</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Quotes">"</a></span><span class="dt">$^X</span><span class="ch">\n</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Quotes">"</a></span>;</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; /home/travis/perl5/perlbrew/perls/5.24.0/bin/perl</span></a></code></pre></div>
<div id="locallib-library-access" class="section level3">
<h3 class="hasAnchor">
<a href="#locallib-library-access" class="anchor"></a>local::lib library access</h3>
<p>Perlbrew supports <a href="https://metacpan.org/pod/local::lib"><code>local::lib</code></a> libraries for further controlling which modules are installed. <code>perlbrewr</code> supports loading these also.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="reference/perlbrew.html">perlbrew</a></span>(<span class="dt">version =</span> <span class="st">"5.24.0"</span>, <span class="dt">lib =</span> <span class="st">"example"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"PERL5LIB"</span>)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; [1] "/tmp/Rtmpes9Rd4/.perlbrew/libs/5.24.0@example/lib/perl5"</span></a></code></pre></div>
<p>Within this <code>local::lib</code> modules may be installed with <a href="https://metacpan.org/pod/App::cpanminus"><code>cpanm</code></a>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="bu">cd</span> inst</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="ex">cpanm</span> -n -q --installdeps .</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; Successfully installed Mojolicious-8.13</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; 1 distribution installed</span></a></code></pre></div>
<p>Since <code><a href="reference/perlbrew.html">perlbrewr::perlbrew</a></code> sets the <code>PERL5LIB</code> environment variable perl code relying on the dependencies is now sucessful.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode perl"><code class="sourceCode perl"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="fu">use</span> <span class="fu">Mojo::Base</span> -<span class="kw">strict</span>;</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="fu">use</span> <span class="fu">Mojo::File</span>;</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">say <span class="fu">Mojo::File</span>-&gt;new(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Quotes">'</a></span><span class="st">inst/cpanfile</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Quotes">'</a></span>)-&gt;slurp;</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; requires "Mojolicious" =&gt; '8.0';</span></a></code></pre></div>
</div>
<div id="listing-and-creating-libraries" class="section level3">
<h3 class="hasAnchor">
<a href="#listing-and-creating-libraries" class="anchor"></a>listing and creating libraries</h3>
<p><code>perlbrew_list</code> returns a listing of the available versions of perl and any <code>local::lib</code> libraries. If a version or library is in use, the <code>active</code> object attribute is also set.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="reference/perlbrew_list.html">perlbrew_list</a></span>()</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt;  [1] "5.22 (5.22.0)"         "5.22.0"               </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt;  [3] "5.22-extras (5.22.4)"  "5.22-shrplib (5.22.4)"</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;  [5] "5.22.4"                "5.24 (5.24.0)"        </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;  [7] "5.24.0"                "5.24.0@example"       </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;  [9] "5.24-extras (5.24.3)"  "5.24-shrplib (5.24.3)"</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; [11] "5.24.3"               </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; attr(,"active")</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; [1] "5.24.0@example"</span></a></code></pre></div>
<p>A new library is created with <code>perlbrew_lib_create</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/perlbrew_lib_create.html">perlbrew_lib_create</a></span>(<span class="dt">version =</span> <span class="st">"5.24.0"</span>, <span class="dt">lib =</span> <span class="st">"foobar"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw"><a href="reference/perlbrew_list.html">perlbrew_list</a></span>()</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;  [1] "5.22 (5.22.0)"         "5.22.0"               </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;  [3] "5.22-extras (5.22.4)"  "5.22-shrplib (5.22.4)"</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt;  [5] "5.22.4"                "5.24 (5.24.0)"        </span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt;  [7] "5.24.0"                "5.24.0@example"       </span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;  [9] "5.24.0@foobar"         "5.24-extras (5.24.3)" </span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; [11] "5.24-shrplib (5.24.3)" "5.24.3"               </span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; attr(,"active")</span></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co">#&gt; [1] "5.24.0@example"</span></a></code></pre></div>
</div>
<div id="knitr" class="section level3">
<h3 class="hasAnchor">
<a href="#knitr" class="anchor"></a>knitr</h3>
<p>The knitr chunk options <code>engine.path</code> and <code>engine.opts</code> are set automatically so that each <code>engine="perl"</code> chunk will use the correct <code>perl</code> interpreter and <code>PERL5LIB</code>. Any <code>engine.opts</code> for perl that have already been set should remain in the list. For this to work correctly the <code><a href="https://www.rdocumentation.org/packages/base/topics/list">list()</a></code> version of the <code>engine.opts</code> should be used. i.e.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">engine.opts =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">perl =</span> <span class="st">"-CS"</span>, <span class="dt">bash =</span> <span class="st">"--norc"</span>))</a></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/kiwiroy/perlbrewr">https://​github.com/​kiwiroy/​perlbrewr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/kiwiroy/perlbrewr/issues">https://​github.com/​kiwiroy/​perlbrewr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Roy Storey <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1375-7136" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/kiwiroy/perlbrewr"><img src="https://travis-ci.org/kiwiroy/perlbrewr.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://coveralls.io/r/kiwiroy/perlbrewr?branch=master"><img src="https://coveralls.io/repos/github/kiwiroy/perlbrewr/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Roy Storey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
